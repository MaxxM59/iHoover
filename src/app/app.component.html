<ng-container id="main-container">
  <mat-card>
    <mat-card-header><h1>iHoover - Maxime Magnez</h1></mat-card-header>
    <mat-card-content>
      <form [formGroup]="squareForm">
        <mat-grid-list cols="2" rowHeight="4:1">
          <mat-grid-tile>
            <mat-form-field appearance="fill">
              <label for="titre"><h2>Largeur de la surface</h2></label>
              <input
                appearance="fill"
                matInput
                type="number"
                class="form-control"
                formControlName="xSquare"
                [(ngModel)]="square.xSquare"
                min="2"
                max="25"
              />

              <mat-hint>La valeur doit être superieure à 2.</mat-hint>
            </mat-form-field></mat-grid-tile
          >
          <mat-grid-tile>
            <mat-form-field appearance="fill">
              <label for="titre"><h2>Hauteur de la surface</h2></label>
              <input
                matInput
                type="number"
                class="form-control"
                formControlName="ySquare"
                [(ngModel)]="square.ySquare"
                min="2"
                max="25"
              />
              <mat-hint>La valeur doit être superieure à 2.</mat-hint>
            </mat-form-field>
          </mat-grid-tile>
        </mat-grid-list>
        <mat-grid-list cols="3" rowHeight="4:1">
          <mat-grid-tile>
            <mat-form-field appearance="fill">
              <label for="titre"><h2>Position horizontale initiale</h2></label>
              <input
                matInput
                type="number"
                class="form-control"
                formControlName="xCurrent"
                [(ngModel)]="currentLocation.xCurrent"
                min="0"
                max="{{ squareForm.value.xSquare }}"
              />
              <mat-hint
                >La valeur ne peut être superieure à la largeur de la
                surface.</mat-hint
              ></mat-form-field
            ></mat-grid-tile
          >
          <mat-grid-tile>
            <mat-form-field appearance="fill">
              <label for="titre"><h2>Position verticale initiale</h2></label>
              <input
                matInput
                type="number"
                class="form-control"
                formControlName="yCurrent"
                [(ngModel)]="currentLocation.yCurrent"
                min="0"
                max="{{ squareForm.value.ySquare }}"
              />
              <mat-hint
                >La valeur ne peut être superieure à la hauteur de la
                surface.</mat-hint
              ></mat-form-field
            ></mat-grid-tile
          >

          <mat-grid-tile>
            <mat-form-field appearance="fill">
              <label for="titre"><h2>Orientation initiale</h2></label>

              <mat-select required>
                <mat-option value="N">North</mat-option>
                <mat-option value="E">East</mat-option>
                <mat-option value="W">West</mat-option>
                <mat-option value="S">South</mat-option>
              </mat-select>
            </mat-form-field>
          </mat-grid-tile>
        </mat-grid-list>

        <button
          id="launchButton"
          mat-raised-button
          type="submit"
          (click)="launcher()"
        >
          Launch iHoover !
        </button>
      </form>
      <mat-card-footer>
        <div *ngIf="isUntouched === true"></div>
        <div id="result" *ngIf="isLoading === false && isOver === true">
          <h2>
            L'aspirateur a terminé son parcours à la case ({{
              finalLocation.xFinal
            }},{{ finalLocation.yFinal }}).
          </h2>
        </div>
        <div *ngIf="isLoading === true && isOver === false">
          <mat-spinner id="loadingSpinner" [diameter]="50"></mat-spinner>
        </div>
      </mat-card-footer>
    </mat-card-content>
  </mat-card>
</ng-container>
